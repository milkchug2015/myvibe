<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dumbbell Workout Timer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 700;
        }

        .timer-display {
            text-align: center;
            margin: 30px 0;
        }

        .current-phase {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .time-remaining {
            font-size: 72px;
            font-weight: 800;
            color: #333;
            font-family: 'Courier New', monospace;
            margin: 0;
            line-height: 1;
        }

        .work-phase {
            color: #e74c3c;
        }

        .rest-phase {
            color: #27ae60;
        }

        .prepare-phase {
            color: #f39c12;
        }

        .controls {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: 600;
            color: #555;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        input[type="number"] {
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            transition: border-color 0.3s ease;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-btn {
            background: #27ae60;
            color: white;
        }

        .start-btn:hover:not(:disabled) {
            background: #219a52;
            transform: translateY(-2px);
        }

        .pause-btn {
            background: #f39c12;
            color: white;
        }

        .pause-btn:hover:not(:disabled) {
            background: #e67e22;
            transform: translateY(-2px);
        }

        .reset-btn {
            background: #e74c3c;
            color: white;
        }

        .reset-btn:hover:not(:disabled) {
            background: #c0392b;
            transform: translateY(-2px);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .progress-container {
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.1s linear;
        }

        .set-counter {
            text-align: center;
            font-size: 16px;
            color: #666;
            margin-top: 15px;
            font-weight: 600;
        }

        .beep-warning {
            text-align: center;
            font-size: 14px;
            color: #e74c3c;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .beep-warning.active {
            opacity: 1;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            .time-remaining {
                font-size: 60px;
            }
            
            button {
                padding: 12px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dumbbell Workout Timer</h1>
        
        <div class="timer-display">
            <div class="current-phase" id="currentPhase">Ready to start</div>
            <h2 class="time-remaining" id="timeRemaining">00:00</h2>
            <div class="set-counter" id="setCounter">Set 0 of 0</div>
            <div class="beep-warning" id="beepWarning">BEEP!</div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="controls">
            <div class="input-group">
                <label for="prepareTime">Prepare Time (seconds)</label>
                <input type="number" id="prepareTime" min="0" max="300" value="5">
            </div>
            
            <div class="input-group">
                <label for="sets">Total Sets</label>
                <input type="number" id="sets" min="1" max="20" value="4">
            </div>
            
            <div class="input-group">
                <label for="workTime">Work Duration (seconds)</label>
                <input type="number" id="workTime" min="1" max="300" value="45">
            </div>
            
            <div class="input-group">
                <label for="restTime">Rest Duration (seconds)</label>
                <input type="number" id="restTime" min="1" max="120" value="15">
            </div>
        </div>

        <div class="button-group">
            <button class="start-btn" id="startBtn">Start</button>
            <button class="pause-btn" id="pauseBtn" disabled>Pause</button>
            <button class="reset-btn" id="resetBtn">Reset</button>
        </div>
    </div>

    <script>
        class WorkoutTimer {
            constructor() {
                this.prepareTime = 5;
                this.sets = 4;
                this.workTime = 45;
                this.restTime = 15;
                this.currentSet = 0;
                this.isWorkPhase = true;
                this.currentTime = 0;
                this.totalTime = 0;
                this.interval = null;
                this.isRunning = false;
                this.isPaused = false;
                this.isPreparePhase = false;
                
                // DOM elements
                this.currentPhaseEl = document.getElementById('currentPhase');
                this.timeRemainingEl = document.getElementById('timeRemaining');
                this.setCounterEl = document.getElementById('setCounter');
                this.progressBarEl = document.getElementById('progressBar');
                this.beepWarningEl = document.getElementById('beepWarning');
                
                // Buttons
                this.startBtn = document.getElementById('startBtn');
                this.pauseBtn = document.getElementById('pauseBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.prepareTimeInput = document.getElementById('prepareTime');
                this.setsInput = document.getElementById('sets');
                this.workTimeInput = document.getElementById('workTime');
                this.restTimeInput = document.getElementById('restTime');
                
                this.init();
            }
            
            init() {
                this.bindEvents();
                this.updateDisplay();
            }
            
            bindEvents() {
                this.startBtn.addEventListener('click', () => this.start());
                this.pauseBtn.addEventListener('click', () => this.pause());
                this.resetBtn.addEventListener('click', () => this.reset());
                
                // Update values when inputs change (only when not running)
                this.prepareTimeInput.addEventListener('change', () => {
                    if (!this.isRunning) {
                        this.prepareTime = parseInt(this.prepareTimeInput.value) || 0;
                        this.prepareTimeInput.value = this.prepareTime;
                    }
                });
                
                this.setsInput.addEventListener('change', () => {
                    if (!this.isRunning) {
                        this.sets = parseInt(this.setsInput.value) || 4;
                        this.setsInput.value = this.sets;
                    }
                });
                
                this.workTimeInput.addEventListener('change', () => {
                    if (!this.isRunning) {
                        this.workTime = parseInt(this.workTimeInput.value) || 45;
                        this.workTimeInput.value = this.workTime;
                    }
                });
                
                this.restTimeInput.addEventListener('change', () => {
                    if (!this.isRunning) {
                        this.restTime = parseInt(this.restTimeInput.value) || 15;
                        this.restTimeInput.value = this.restTime;
                    }
                });
            }
            
            start() {
                if (this.isRunning && this.isPaused) {
                    // Resume from pause
                    this.isPaused = false;
                    this.startBtn.textContent = 'Start';
                    this.pauseBtn.disabled = false;
                    this.startInterval();
                } else if (!this.isRunning) {
                    // Start fresh
                    this.prepareTime = parseInt(this.prepareTimeInput.value) || 0;
                    this.sets = parseInt(this.setsInput.value) || 4;
                    this.workTime = parseInt(this.workTimeInput.value) || 45;
                    this.restTime = parseInt(this.restTimeInput.value) || 15;
                    
                    // Initialize for prepare phase if prepare time > 0
                    if (this.prepareTime > 0) {
                        this.isPreparePhase = true;
                        this.currentTime = this.prepareTime;
                        this.totalTime = this.prepareTime;
                    } else {
                        // Skip prepare phase if 0 seconds
                        this.currentSet = 1;
                        this.isWorkPhase = true;
                        this.currentTime = this.workTime;
                        this.totalTime = this.workTime;
                        this.isPreparePhase = false;
                    }
                    
                    this.isRunning = true;
                    this.isPaused = false;
                    
                    this.startBtn.disabled = true;
                    this.pauseBtn.disabled = false;
                    this.resetBtn.disabled = false;
                    this.prepareTimeInput.disabled = true;
                    this.setsInput.disabled = true;
                    this.workTimeInput.disabled = true;
                    this.restTimeInput.disabled = true;
                    
                    this.updateDisplay();
                    this.startInterval();
                }
            }
            
            startInterval() {
                this.interval = setInterval(() => {
                    this.currentTime--;
                    
                    // Check for beep warning (last 3 seconds)
                    if (this.currentTime <= 3 && this.currentTime > 0) {
                        this.triggerBeep();
                    }
                    
                    if (this.currentTime <= 0) {
                        this.nextPhase();
                    }
                    
                    this.updateDisplay();
                    this.updateProgress();
                }, 1000);
            }
            
            triggerBeep() {
                // Visual beep indicator
                this.beepWarningEl.classList.add('active');
                setTimeout(() => {
                    this.beepWarningEl.classList.remove('active');
                }, 300);
                
                // Audio beep using Web Audio API
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 800; // Hz
                    oscillator.type = 'sine';
                    gainNode.gain.value = 0.3;
                    
                    oscillator.start();
                    setTimeout(() => {
                        oscillator.stop();
                    }, 200);
                } catch (e) {
                    // Fallback: console beep or just visual
                    console.log('Beep!');
                }
            }
            
            nextPhase() {
                if (this.isPreparePhase) {
                    // Finished prepare phase, start first work set
                    this.isPreparePhase = false;
                    this.currentSet = 1;
                    this.isWorkPhase = true;
                    this.currentTime = this.workTime;
                    this.totalTime = this.workTime;
                    return;
                }
                
                if (this.isWorkPhase) {
                    // Just finished work phase
                    if (this.currentSet >= this.sets) {
                        // All sets completed
                        this.completeWorkout();
                        return;
                    }
                    
                    // Move to rest phase
                    this.isWorkPhase = false;
                    this.currentTime = this.restTime;
                    this.totalTime = this.restTime;
                } else {
                    // Just finished rest phase
                    this.currentSet++;
                    this.isWorkPhase = true;
                    this.currentTime = this.workTime;
                    this.totalTime = this.workTime;
                }
            }
            
            completeWorkout() {
                clearInterval(this.interval);
                this.isRunning = false;
                this.isPaused = false;
                this.isPreparePhase = false;
                
                this.currentPhaseEl.textContent = 'Workout Complete!';
                this.timeRemainingEl.textContent = '00:00';
                this.setCounterEl.textContent = `Completed ${this.sets} sets!`;
                this.progressBarEl.style.width = '100%';
                
                // Final celebration beep
                this.triggerBeep();
                setTimeout(() => this.triggerBeep(), 300);
                setTimeout(() => this.triggerBeep(), 600);
                
                this.resetControls();
            }
            
            pause() {
                if (this.isRunning && !this.isPaused) {
                    clearInterval(this.interval);
                    this.isPaused = true;
                    this.startBtn.textContent = 'Resume';
                    this.pauseBtn.disabled = true;
                }
            }
            
            reset() {
                clearInterval(this.interval);
                this.isRunning = false;
                this.isPaused = false;
                this.isPreparePhase = false;
                this.currentSet = 0;
                this.isWorkPhase = true;
                this.currentTime = 0;
                this.totalTime = 0;
                
                this.resetControls();
                this.updateDisplay();
                this.progressBarEl.style.width = '0%';
                this.currentPhaseEl.textContent = 'Ready to start';
                this.setCounterEl.textContent = 'Set 0 of 0';
            }
            
            resetControls() {
                this.startBtn.disabled = false;
                this.startBtn.textContent = 'Start';
                this.pauseBtn.disabled = true;
                this.resetBtn.disabled = false;
                this.prepareTimeInput.disabled = false;
                this.setsInput.disabled = false;
                this.workTimeInput.disabled = false;
                this.restTimeInput.disabled = false;
            }
            
            updateDisplay() {
                // Format time as MM:SS
                const minutes = Math.floor(this.currentTime / 60);
                const seconds = this.currentTime % 60;
                const formattedTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                this.timeRemainingEl.textContent = formattedTime;
                
                // Update phase text and colors
                if (this.currentSet === 0 && !this.isRunning) {
                    this.currentPhaseEl.textContent = 'Ready to start';
                    this.timeRemainingEl.className = 'time-remaining';
                } else if (this.isPreparePhase) {
                    this.currentPhaseEl.textContent = 'PREPARE';
                    this.timeRemainingEl.className = 'time-remaining prepare-phase';
                    this.setCounterEl.textContent = 'Get ready!';
                } else if (this.isWorkPhase) {
                    this.currentPhaseEl.textContent = 'WORK';
                    this.timeRemainingEl.className = 'time-remaining work-phase';
                    this.setCounterEl.textContent = `Set ${this.currentSet} of ${this.sets}`;
                } else {
                    this.currentPhaseEl.textContent = 'REST';
                    this.timeRemainingEl.className = 'time-remaining rest-phase';
                    this.setCounterEl.textContent = `Set ${this.currentSet} of ${this.sets}`;
                }
            }
            
            updateProgress() {
                if (this.totalTime > 0) {
                    const progress = ((this.totalTime - this.currentTime) / this.totalTime) * 100;
                    this.progressBarEl.style.width = `${progress}%`;
                }
            }
        }
        
        // Initialize the timer when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new WorkoutTimer();
        });
    </script>
</body>
</html>

